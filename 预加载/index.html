<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>聚力共享</title>
        <meta name="viewport" content="width=640,user-scalable=no">
        <link rel="stylesheet" href="c/css/swiper.min.css">
        <link rel="stylesheet" href="c/css/animate.css">
        <link rel="stylesheet" href="c/css/reset.css">
        <link rel="stylesheet" href="c/css/style.css">
        <script src="c/js/swiper.min.js"></script>
        <script src="c/js/swiper.animate.min.js"></script>
    </head>
    <audio id="audio" src="c/1.mp3" preload="auto" loop="loop" autoplay="autoplay"></audio>
    <body>
        <div class="load-container">
            <img class='loading' src="c/images/loading.png">
            <span class='loadNum'>0%</span>
        </div>
    </body>
    <script src="c/js/jquery-1.11.3.min.js"></script>
    <script src="c/js/pxloader-all.min.js"></script>
    <script>
        //loading
        var loader = new PxLoader();
        var URL = window.location.href;
        var BASE_PATH = URL.substring(0, URL.lastIndexOf('/') + 1);
        var realLoadingNum = 0;
        var fileList = [];
        for (var i = 2; i < 52; i++) {
            fileList.push('c/images/home/'+i+'.jpg');
        }
        for(var i = 1; i < 52; i++){
            fileList.push('c/images/intruText/'+ i +'.jpg');
        }
        for(var i = 0; i < fileList.length; i++){
            var pxImage = new PxLoaderImage(BASE_PATH + fileList[i]);
            pxImage.imageNumber = i + 1;
            loader.add(pxImage);
        }
        loader.addCompletionListener(function(){
            console.log("预加载图片:"+fileList.length+"张");
        });
        loader.addProgressListener(function(e){
            var percent = Math.round( (e.completedCount / e.totalCount) * 100); //正序, 1-100
            realLoadingNum = percent;
            $('.loadNum').text(realLoadingNum + '%');

        });
        loader.start();
    </script>
</html>